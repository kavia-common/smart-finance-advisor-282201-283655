{"is_source_file": true, "format": "Python", "description": "This is a FastAPI router module that manages CRUD operations for financial transactions, including listing, retrieving by ID, creating, updating, and deleting transactions. It defines data schemas and handles user authentication and database interactions.", "external_files": ["src/core/security", "src/db/models", "src/db/schemas", "src/db/session"], "external_methods": ["get_current_user", "get_db"], "published": ["router"], "classes": [{"name": "TransactionUpdate", "description": "Schema for updating a transaction, with all fields optional."}], "methods": [{"name": "list[TransactionSchema] list_transactions( db: Annotated[Session, Depends(get_db)], current_user: Annotated[User, Depends(get_current_user)], start: Optional[date] = Query(None, description=\"Start date inclusive (YYYY-MM-DD)\"), end: Optional[date] = Query(None, description=\"End date inclusive (YYYY-MM-DD)\"), category: Optional[str] = Query(None, description=\"Filter by category (exact match)\"), )", "description": "Retrieve a list of transactions for the current user, with optional date range and category filters.", "scope": "", "scopeKind": ""}, {"name": "TransactionSchema get_transaction( tx_id: int, db: Annotated[Session, Depends(get_db)], current_user: Annotated[User, Depends(get_current_user)], )", "description": "Retrieve a specific transaction by ID for the current user.", "scope": "", "scopeKind": ""}, {"name": "TransactionSchema create_transaction( payload: TransactionCreateSchema, db: Annotated[Session, Depends(get_db)], current_user: Annotated[User, Depends(get_current_user)], )", "description": "Create a new transaction associated with the current user.", "scope": "", "scopeKind": ""}, {"name": "TransactionSchema update_transaction( tx_id: int, payload: TransactionUpdate, db: Annotated[Session, Depends(get_db)], current_user: Annotated[User, Depends(get_current_user)], )", "description": "Update an existing transaction by ID for the current user.", "scope": "", "scopeKind": ""}, {"name": "None delete_transaction( tx_id: int, db: Annotated[Session, Depends(get_db)], current_user: Annotated[User, Depends(get_current_user)], )", "description": "Delete a transaction by ID for the current user.", "scope": "", "scopeKind": ""}], "calls": ["select", "db.execute", "db.get", "db.add", "db.commit", "db.refresh", "db.delete", "current_user.id"], "search-terms": ["transactions", "TransactionSchema", "Transaction", "TransactionUpdate", "transactions.py", "FastAPI router"], "state": 2, "file_id": 11, "knowledge_revision": 110, "git_revision": "9993c33d21badd975db3ddd0c5da33d699962cd1", "revision_history": [{"32": ""}, {"40": "89b29ba0c92a4a64dd36aaa1d3d45e0821055744"}, {"42": "89b29ba0c92a4a64dd36aaa1d3d45e0821055744"}, {"48": "2d1bfb1735f32536bce9a804478ddb802a807fd7"}, {"49": "2d1bfb1735f32536bce9a804478ddb802a807fd7"}, {"50": "7d4a105f6cba9265552a0037871394333f49d5e2"}, {"51": "7d4a105f6cba9265552a0037871394333f49d5e2"}, {"52": "9993c33d21badd975db3ddd0c5da33d699962cd1"}, {"110": "9993c33d21badd975db3ddd0c5da33d699962cd1"}], "ctags": [{"_type": "tag", "name": "TransactionCreateSchema", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/transactions.py", "pattern": "/^from src.db.schemas import TransactionCreate as TransactionCreateSchema$/", "language": "Python", "kind": "unknown", "nameref": "unknown:TransactionCreate"}, {"_type": "tag", "name": "TransactionSchema", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/transactions.py", "pattern": "/^from src.db.schemas import Transaction as TransactionSchema$/", "language": "Python", "kind": "unknown", "nameref": "unknown:Transaction"}, {"_type": "tag", "name": "TransactionUpdate", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/transactions.py", "pattern": "/^class TransactionUpdate(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "amount", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/transactions.py", "pattern": "/^    amount: Optional[float] = Field(None, description=\"Amount, positive for income\")$/", "language": "Python", "typeref": "typename:Optional[float]", "kind": "variable", "scope": "TransactionUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "category", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/transactions.py", "pattern": "/^    category: Optional[str] = Field(None, description=\"Transaction category\")$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "TransactionUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "create_transaction", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/transactions.py", "pattern": "/^def create_transaction($/", "language": "Python", "typeref": "typename:TransactionSchema", "kind": "function", "signature": "( payload: TransactionCreateSchema, db: Annotated[Session, Depends(get_db)], current_user: Annotated[User, Depends(get_current_user)], )"}, {"_type": "tag", "name": "delete_transaction", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/transactions.py", "pattern": "/^def delete_transaction($/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "( tx_id: int, db: Annotated[Session, Depends(get_db)], current_user: Annotated[User, Depends(get_current_user)], )"}, {"_type": "tag", "name": "description", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/transactions.py", "pattern": "/^    description: Optional[str] = Field(None, description=\"Optional description\")$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "TransactionUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "get_transaction", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/transactions.py", "pattern": "/^def get_transaction($/", "language": "Python", "typeref": "typename:TransactionSchema", "kind": "function", "signature": "( tx_id: int, db: Annotated[Session, Depends(get_db)], current_user: Annotated[User, Depends(get_current_user)], )"}, {"_type": "tag", "name": "list_transactions", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/transactions.py", "pattern": "/^def list_transactions($/", "language": "Python", "typeref": "typename:list[TransactionSchema]", "kind": "function", "signature": "( db: Annotated[Session, Depends(get_db)], current_user: Annotated[User, Depends(get_current_user)], start: Optional[date] = Query(None, description=\"Start date inclusive (YYYY-MM-DD)\"), end: Optional[date] = Query(None, description=\"End date inclusive (YYYY-MM-DD)\"), category: Optional[str] = Query(None, description=\"Filter by category (exact match)\"), )"}, {"_type": "tag", "name": "model_config", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/transactions.py", "pattern": "/^    model_config = ConfigDict(populate_by_name=False)$/", "language": "Python", "kind": "variable", "scope": "TransactionUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "router", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/transactions.py", "pattern": "/^router = APIRouter(prefix=\"\\/transactions\", tags=[\"transactions\"])$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "txn_date", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/transactions.py", "pattern": "/^    txn_date: Optional[date] = Field(None, alias=\"date\", description=\"Transaction date\")$/", "language": "Python", "typeref": "typename:Optional[date]", "kind": "variable", "scope": "TransactionUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "type", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/transactions.py", "pattern": "/^    type: Optional[str] = Field(None, description=\"Transaction type: expense or income\")$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "TransactionUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "update_transaction", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/transactions.py", "pattern": "/^def update_transaction($/", "language": "Python", "typeref": "typename:TransactionSchema", "kind": "function", "signature": "( tx_id: int, payload: TransactionUpdate, db: Annotated[Session, Depends(get_db)], current_user: Annotated[User, Depends(get_current_user)], )"}], "hash": "c4cba7d4803b0b9d6b0e11916d8fba0b", "format-version": 4, "code-base-name": "finance_backend", "filename": "finance_backend/src/api/routers/transactions.py", "fields": [{"name": "Optional[float] amount", "scope": "TransactionUpdate", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] category", "scope": "TransactionUpdate", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] description", "scope": "TransactionUpdate", "scopeKind": "class", "description": "unavailable"}, {"name": "model_config = ConfigDict(populate_by_name=False)", "scope": "TransactionUpdate", "scopeKind": "class", "description": "unavailable"}, {"name": "router = APIRouter(prefix=\"\\/transactions\", tags=[\"transactions\"])", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Optional[date] txn_date", "scope": "TransactionUpdate", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] type", "scope": "TransactionUpdate", "scopeKind": "class", "description": "unavailable"}]}