{"is_source_file": true, "format": "Python", "description": "This file defines a service module for a financial application, providing functions to compute savings advice and goals projection based on user transaction data. It contains data classes, internal helper functions, and public interface functions that interact with a database using SQLAlchemy ORM models.", "external_files": ["src/db/models.py"], "external_methods": ["select", "and_"], "published": ["compute_savings_advice", "compute_goals_plan"], "classes": [{"name": "DateRange", "description": "A simple container class for representing a date range with start and end dates."}], "methods": [{"name": "date _today()", "description": "Returns the current date.", "scope": "", "scopeKind": ""}, {"name": "date _month_start(d: date)", "description": "Returns the first day of the month for a given date.", "scope": "", "scopeKind": ""}, {"name": "date _next_month_start(d: date)", "description": "Returns the first day of the month following the month of the given date.", "scope": "", "scopeKind": ""}, {"name": "DateRange _last_30_days_range()", "description": "Creates and returns a DateRange object covering the last 30 days.", "scope": "", "scopeKind": ""}, {"name": "list[Transaction] _fetch_transactions(db: Session, user_id: int, rng: DateRange)", "description": "Fetches transactions for a user within a specified date range from the database.", "scope": "", "scopeKind": ""}, {"name": "bool _is_income(tx: Transaction)", "description": "Determines if a transaction is income based on its type or amount.", "scope": "", "scopeKind": ""}, {"name": "tuple[float,Dict[str,float],float] _aggregate_spending_patterns(txs: list[Transaction])", "description": "Analyzes a list of transactions to calculate total income, per-category spending, and average daily spend.", "scope": "", "scopeKind": ""}, {"name": "dict compute_savings_advice( db: Session, user_id: int, period: Optional[str] = None, )", "description": "Calculates savings targets and spending reductions based on recent transaction data for a user.", "scope": "", "scopeKind": ""}, {"name": "dict compute_goals_plan( db: Session, user_id: int, today: Optional[date] = None, )", "description": "Projects timelines to reach user goals based on current net savings and budgeting data.", "scope": "", "scopeKind": ""}, {"name": "date add_months(d: date, months: int)", "scope": "compute_goals_plan", "scopeKind": "function", "description": "unavailable"}], "calls": ["select", "and_", "date.today()", "list(db.execute(...).scalars().all())"], "search-terms": ["advice_service", "compute_savings_advice", "compute_goals_plan", "transaction analysis", "spending patterns", "goals projection"], "state": 2, "file_id": 17, "knowledge_revision": 68, "git_revision": "", "ctags": [{"_type": "tag", "name": "DateRange", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/services/advice_service.py", "pattern": "/^class DateRange:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "_aggregate_spending_patterns", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/services/advice_service.py", "pattern": "/^def _aggregate_spending_patterns(txs: list[Transaction]) -> tuple[float, Dict[str, float], float/", "language": "Python", "typeref": "typename:tuple[float,Dict[str,float],float]", "kind": "function", "signature": "(txs: list[Transaction])"}, {"_type": "tag", "name": "_fetch_transactions", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/services/advice_service.py", "pattern": "/^def _fetch_transactions(db: Session, user_id: int, rng: DateRange) -> list[Transaction]:$/", "language": "Python", "typeref": "typename:list[Transaction]", "kind": "function", "signature": "(db: Session, user_id: int, rng: DateRange)"}, {"_type": "tag", "name": "_is_income", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/services/advice_service.py", "pattern": "/^def _is_income(tx: Transaction) -> bool:$/", "language": "Python", "typeref": "typename:bool", "kind": "function", "signature": "(tx: Transaction)"}, {"_type": "tag", "name": "_last_30_days_range", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/services/advice_service.py", "pattern": "/^def _last_30_days_range() -> DateRange:$/", "language": "Python", "typeref": "typename:DateRange", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "_month_start", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/services/advice_service.py", "pattern": "/^def _month_start(d: date) -> date:$/", "language": "Python", "typeref": "typename:date", "kind": "function", "signature": "(d: date)"}, {"_type": "tag", "name": "_next_month_start", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/services/advice_service.py", "pattern": "/^def _next_month_start(d: date) -> date:$/", "language": "Python", "typeref": "typename:date", "kind": "function", "signature": "(d: date)"}, {"_type": "tag", "name": "_today", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/services/advice_service.py", "pattern": "/^def _today() -> date:$/", "language": "Python", "typeref": "typename:date", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "add_months", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/services/advice_service.py", "pattern": "/^    def add_months(d: date, months: int) -> date:$/", "file": true, "language": "Python", "typeref": "typename:date", "kind": "function", "signature": "(d: date, months: int)", "scope": "compute_goals_plan", "scopeKind": "function"}, {"_type": "tag", "name": "compute_goals_plan", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/services/advice_service.py", "pattern": "/^def compute_goals_plan($/", "language": "Python", "typeref": "typename:dict", "kind": "function", "signature": "( db: Session, user_id: int, today: Optional[date] = None, )"}, {"_type": "tag", "name": "compute_savings_advice", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/services/advice_service.py", "pattern": "/^def compute_savings_advice($/", "language": "Python", "typeref": "typename:dict", "kind": "function", "signature": "( db: Session, user_id: int, period: Optional[str] = None, )"}], "hash": "c9c42095b7cde9120a63fdefd775ebe8", "format-version": 4, "code-base-name": "finance_backend", "filename": "finance_backend/src/services/advice_service.py", "revision_history": [{"68": ""}]}