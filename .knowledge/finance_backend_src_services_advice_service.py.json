{"is_source_file": true, "format": "Python", "description": "This file defines services for financial advice within a backend system, including functions to compute savings advice and project goal timelines based on transaction data and user goals.", "external_files": ["src/db/models"], "external_methods": ["sqlalchemy.select", "sqlalchemy.orm.Session"], "published": ["compute_savings_advice", "compute_goals_plan"], "classes": [{"name": "DateRange", "description": "Simple container class for a date range with start and end dates."}], "methods": [{"name": "date _today()", "description": "Returns the current date.", "scope": "", "scopeKind": ""}, {"name": "date _month_start(d: date)", "description": "Calculates the first day of the month for a given date.", "scope": "", "scopeKind": ""}, {"name": "date _next_month_start(d: date)", "description": "Calculates the first day of the next month for a given date.", "scope": "", "scopeKind": ""}, {"name": "DateRange _last_30_days_range()", "description": "Returns a DateRange object representing the last 30 days.", "scope": "", "scopeKind": ""}, {"name": "list[Transaction] _fetch_transactions(db: Session, user_id: int, rng: DateRange)", "description": "Fetches transactions for a user within a specified date range from the database.", "scope": "", "scopeKind": ""}, {"name": "bool _is_income(tx: Transaction)", "description": "Determines if a transaction is income based on its type or amount.", "scope": "", "scopeKind": ""}, {"name": "tuple[float,Dict[str,float],float] _aggregate_spending_patterns(txs: list[Transaction])", "description": "Aggregates total income, spending per category, and average daily spend from a list of transactions.", "scope": "", "scopeKind": ""}, {"name": "date add_months(d: date, months: int)", "scope": "compute_goals_plan", "scopeKind": "function", "description": "unavailable"}, {"name": "dict compute_goals_plan( db: Session, user_id: int, today: Optional[date] = None, )", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "dict compute_savings_advice( db: Session, user_id: int, period: Optional[str] = None, )", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["select(Transaction)", "select(Goal).where(Goal.user_id == user_id)", "db.execute", "date.today()", "date()", "abs()"], "search-terms": ["advice_service", "compute_savings_advice", "compute_goals_plan", "transaction analysis", "financial goals", "spending patterns", "goal projection"], "state": 2, "file_id": 17, "knowledge_revision": 72, "git_revision": "82beffcf3c02c0577185c761679dee7b06d3dd45", "revision_history": [{"68": ""}, {"72": "82beffcf3c02c0577185c761679dee7b06d3dd45"}], "ctags": [{"_type": "tag", "name": "DateRange", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/services/advice_service.py", "pattern": "/^class DateRange:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "_aggregate_spending_patterns", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/services/advice_service.py", "pattern": "/^def _aggregate_spending_patterns(txs: list[Transaction]) -> tuple[float, Dict[str, float], float/", "language": "Python", "typeref": "typename:tuple[float,Dict[str,float],float]", "kind": "function", "signature": "(txs: list[Transaction])"}, {"_type": "tag", "name": "_fetch_transactions", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/services/advice_service.py", "pattern": "/^def _fetch_transactions(db: Session, user_id: int, rng: DateRange) -> list[Transaction]:$/", "language": "Python", "typeref": "typename:list[Transaction]", "kind": "function", "signature": "(db: Session, user_id: int, rng: DateRange)"}, {"_type": "tag", "name": "_is_income", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/services/advice_service.py", "pattern": "/^def _is_income(tx: Transaction) -> bool:$/", "language": "Python", "typeref": "typename:bool", "kind": "function", "signature": "(tx: Transaction)"}, {"_type": "tag", "name": "_last_30_days_range", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/services/advice_service.py", "pattern": "/^def _last_30_days_range() -> DateRange:$/", "language": "Python", "typeref": "typename:DateRange", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "_month_start", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/services/advice_service.py", "pattern": "/^def _month_start(d: date) -> date:$/", "language": "Python", "typeref": "typename:date", "kind": "function", "signature": "(d: date)"}, {"_type": "tag", "name": "_next_month_start", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/services/advice_service.py", "pattern": "/^def _next_month_start(d: date) -> date:$/", "language": "Python", "typeref": "typename:date", "kind": "function", "signature": "(d: date)"}, {"_type": "tag", "name": "_today", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/services/advice_service.py", "pattern": "/^def _today() -> date:$/", "language": "Python", "typeref": "typename:date", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "add_months", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/services/advice_service.py", "pattern": "/^    def add_months(d: date, months: int) -> date:$/", "file": true, "language": "Python", "typeref": "typename:date", "kind": "function", "signature": "(d: date, months: int)", "scope": "compute_goals_plan", "scopeKind": "function"}, {"_type": "tag", "name": "compute_goals_plan", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/services/advice_service.py", "pattern": "/^def compute_goals_plan($/", "language": "Python", "typeref": "typename:dict", "kind": "function", "signature": "( db: Session, user_id: int, today: Optional[date] = None, )"}, {"_type": "tag", "name": "compute_savings_advice", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/services/advice_service.py", "pattern": "/^def compute_savings_advice($/", "language": "Python", "typeref": "typename:dict", "kind": "function", "signature": "( db: Session, user_id: int, period: Optional[str] = None, )"}], "hash": "8970e17ca3f02bcc48494573e07ddc56", "format-version": 4, "code-base-name": "finance_backend", "filename": "finance_backend/src/services/advice_service.py"}