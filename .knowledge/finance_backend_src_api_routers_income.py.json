{"is_source_file": true, "format": "Python", "description": "This Python source file defines API endpoints using FastAPI for managing income transactions, including creating, listing, and deleting income entries for authenticated users. It utilizes SQLAlchemy for database interactions and Pydantic for data validation.", "external_files": ["src/core/security.py", "src/db/models.py", "src/db/schemas.py", "src/db/session.py"], "external_methods": ["get_current_user", "get_db"], "published": ["create_income", "list_income", "delete_income"], "classes": [{"name": "IncomeCreate", "description": "Pydantic model for creating an income transaction, including fields for date, amount, category, and optional description."}], "methods": [{"name": "TransactionSchema create_income( payload: IncomeCreate, db: Annotated[Session, Depends(get_db)], current_user: Annotated[User, Depends(get_current_user)], )", "description": "API endpoint to create a new income transaction for the authenticated user.", "scope": "", "scopeKind": ""}, {"name": "list[TransactionSchema] list_income( db: Annotated[Session, Depends(get_db)], current_user: Annotated[User, Depends(get_current_user)], month: Optional[int] = Query(None, ge=1, le=12, description=\"Month number (1-12)\"), year: Optional[int] = Query(None, ge=1900, le=9999, description=\"Year (e.g., 2025)\"), )", "description": "API endpoint to list income transactions filtered by optional month and year for the authenticated user.", "scope": "", "scopeKind": ""}, {"name": "None delete_income( id: int, db: Annotated[Session, Depends(get_db)], current_user: Annotated[User, Depends(get_current_user)], )", "description": "API endpoint to delete an income transaction by ID, only if it belongs to the current user.", "scope": "", "scopeKind": ""}], "calls": ["db.add", "db.commit", "db.refresh", "db.execute", "db.get", "db.delete", "get_current_user", "get_db"], "search-terms": ["income endpoints", "transactions creation", "income listing", "income deletion", "FastAPI income API"], "state": 2, "file_id": 25, "knowledge_revision": 130, "git_revision": "03629ed1584e713bdcea33e2efd9e56b83a87cdb", "revision_history": [{"121": ""}, {"128": "03629ed1584e713bdcea33e2efd9e56b83a87cdb"}, {"130": "03629ed1584e713bdcea33e2efd9e56b83a87cdb"}], "ctags": [{"_type": "tag", "name": "Config", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/income.py", "pattern": "/^    class Config:$/", "language": "Python", "kind": "class", "scope": "IncomeCreate", "scopeKind": "class"}, {"_type": "tag", "name": "IncomeCreate", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/income.py", "pattern": "/^class IncomeCreate(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "TransactionSchema", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/income.py", "pattern": "/^from src.db.schemas import Transaction as TransactionSchema$/", "language": "Python", "kind": "unknown", "nameref": "unknown:Transaction"}, {"_type": "tag", "name": "amount", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/income.py", "pattern": "/^    amount: float = Field(..., description=\"Income amount (positive number)\")$/", "language": "Python", "typeref": "typename:float", "kind": "variable", "scope": "IncomeCreate", "scopeKind": "class"}, {"_type": "tag", "name": "category", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/income.py", "pattern": "/^    category: str = Field(..., description=\"Category for the income (e.g., Salary)\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "IncomeCreate", "scopeKind": "class"}, {"_type": "tag", "name": "create_income", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/income.py", "pattern": "/^def create_income($/", "language": "Python", "typeref": "typename:TransactionSchema", "kind": "function", "signature": "( payload: IncomeCreate, db: Annotated[Session, Depends(get_db)], current_user: Annotated[User, Depends(get_current_user)], )"}, {"_type": "tag", "name": "delete_income", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/income.py", "pattern": "/^def delete_income($/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "( id: int, db: Annotated[Session, Depends(get_db)], current_user: Annotated[User, Depends(get_current_user)], )"}, {"_type": "tag", "name": "description", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/income.py", "pattern": "/^    description: Optional[str] = Field(None, description=\"Optional description\")$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "IncomeCreate", "scopeKind": "class"}, {"_type": "tag", "name": "list_income", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/income.py", "pattern": "/^def list_income($/", "language": "Python", "typeref": "typename:list[TransactionSchema]", "kind": "function", "signature": "( db: Annotated[Session, Depends(get_db)], current_user: Annotated[User, Depends(get_current_user)], month: Optional[int] = Query(None, ge=1, le=12, description=\"Month number (1-12)\"), year: Optional[int] = Query(None, ge=1900, le=9999, description=\"Year (e.g., 2025)\"), )"}, {"_type": "tag", "name": "populate_by_name", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/income.py", "pattern": "/^        populate_by_name = True  # allow using field names as well as aliases$/", "language": "Python", "kind": "variable", "scope": "IncomeCreate.Config", "scopeKind": "class"}, {"_type": "tag", "name": "router", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/income.py", "pattern": "/^router = APIRouter(prefix=\"\\/income\", tags=[\"transactions\"])$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "txn_date", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/income.py", "pattern": "/^    txn_date: Optional[date] = Field(..., alias=\"date\", description=\"Transaction date (YYYY-MM-D/", "language": "Python", "typeref": "typename:Optional[date]", "kind": "variable", "scope": "IncomeCreate", "scopeKind": "class"}], "hash": "897a83846d54581778092afec39dc1fc", "format-version": 4, "code-base-name": "finance_backend", "filename": "finance_backend/src/api/routers/income.py", "fields": [{"name": "float amount", "scope": "IncomeCreate", "scopeKind": "class", "description": "unavailable"}, {"name": "str category", "scope": "IncomeCreate", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] description", "scope": "IncomeCreate", "scopeKind": "class", "description": "unavailable"}, {"name": "populate_by_name = True  # allow using field names as well as aliases", "scope": "IncomeCreate.Config", "scopeKind": "class", "description": "unavailable"}, {"name": "router = APIRouter(prefix=\"\\/income\", tags=[\"transactions\"])", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Optional[date] txn_date", "scope": "IncomeCreate", "scopeKind": "class", "description": "unavailable"}]}