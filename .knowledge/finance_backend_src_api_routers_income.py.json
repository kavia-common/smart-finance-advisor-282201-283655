{"is_source_file": true, "format": "Python (FastAPI)", "description": "This file defines API endpoints for managing 'income' transactions in a financial application. It includes data models, route handlers for creating, listing, and deleting income transactions, and relies on SQLAlchemy ORM models and dependencies for user authentication and database sessions.", "external_files": ["src/core/security.py", "src/db/models.py", "src/db/schemas.py", "src/db/session.py"], "external_methods": ["get_current_user", "get_db"], "published": ["create_income", "list_income", "delete_income"], "classes": [{"name": "IncomeCreate", "description": "Pydantic model for creating an income entry, with fields for date, amount, category, and description, including configuration for aliasing and data population."}], "methods": [{"name": "TransactionSchema create_income( payload: IncomeCreate, db: Annotated[Session, Depends(get_db)], current_user: Annotated[User, Depends(get_current_user)], )", "description": "API endpoint to create a new income transaction for the authenticated user.", "scope": "", "scopeKind": ""}, {"name": "list[TransactionSchema] list_income( db: Annotated[Session, Depends(get_db)], current_user: Annotated[User, Depends(get_current_user)], month: Optional[int] = Query(None, ge=1, le=12, description=\"Month number (1-12)\"), year: Optional[int] = Query(None, ge=1900, le=9999, description=\"Year (e.g., 2025)\"), )", "description": "API endpoint to list income transactions, optionally filtered by month and year.", "scope": "", "scopeKind": ""}, {"name": "Response delete_income( id: int, db: Annotated[Session, Depends(get_db)], current_user: Annotated[User, Depends(get_current_user)], )", "description": "API endpoint to delete a specific income transaction, ensuring it belongs to the current user.", "scope": "", "scopeKind": ""}], "calls": ["db.add", "db.commit", "db.refresh", "db.execute", "db.get", "db.delete"], "search-terms": ["FastAPI income transactions", "income route handlers", "IncomeCreate Pydantic model", "transaction filtering by date", "income delete endpoint"], "state": 2, "file_id": 25, "knowledge_revision": 133, "git_revision": "be69a2642cc29f97cf0ebc4e99b686f37e788daa", "revision_history": [{"121": ""}, {"128": "03629ed1584e713bdcea33e2efd9e56b83a87cdb"}, {"130": "03629ed1584e713bdcea33e2efd9e56b83a87cdb"}, {"131": "0c2cec3c3e9658338ee8bee927bc090b44a4849f"}, {"132": "be69a2642cc29f97cf0ebc4e99b686f37e788daa"}, {"133": "be69a2642cc29f97cf0ebc4e99b686f37e788daa"}], "ctags": [{"_type": "tag", "name": "IncomeCreate", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/income.py", "pattern": "/^class IncomeCreate(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "TransactionSchema", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/income.py", "pattern": "/^from src.db.schemas import Transaction as TransactionSchema$/", "language": "Python", "kind": "unknown", "nameref": "unknown:Transaction"}, {"_type": "tag", "name": "amount", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/income.py", "pattern": "/^    amount: float = Field(..., description=\"Income amount (positive number)\")$/", "language": "Python", "typeref": "typename:float", "kind": "variable", "scope": "IncomeCreate", "scopeKind": "class"}, {"_type": "tag", "name": "category", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/income.py", "pattern": "/^    category: str = Field(..., description=\"Category for the income (e.g., Salary)\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "IncomeCreate", "scopeKind": "class"}, {"_type": "tag", "name": "create_income", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/income.py", "pattern": "/^def create_income($/", "language": "Python", "typeref": "typename:TransactionSchema", "kind": "function", "signature": "( payload: IncomeCreate, db: Annotated[Session, Depends(get_db)], current_user: Annotated[User, Depends(get_current_user)], )"}, {"_type": "tag", "name": "delete_income", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/income.py", "pattern": "/^def delete_income($/", "language": "Python", "typeref": "typename:Response", "kind": "function", "signature": "( id: int, db: Annotated[Session, Depends(get_db)], current_user: Annotated[User, Depends(get_current_user)], )"}, {"_type": "tag", "name": "description", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/income.py", "pattern": "/^    description: Optional[str] = Field(None, description=\"Optional description\")$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "IncomeCreate", "scopeKind": "class"}, {"_type": "tag", "name": "list_income", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/income.py", "pattern": "/^def list_income($/", "language": "Python", "typeref": "typename:list[TransactionSchema]", "kind": "function", "signature": "( db: Annotated[Session, Depends(get_db)], current_user: Annotated[User, Depends(get_current_user)], month: Optional[int] = Query(None, ge=1, le=12, description=\"Month number (1-12)\"), year: Optional[int] = Query(None, ge=1900, le=9999, description=\"Year (e.g., 2025)\"), )"}, {"_type": "tag", "name": "model_config", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/income.py", "pattern": "/^    model_config = ConfigDict(populate_by_name=True, from_attributes=True)$/", "language": "Python", "kind": "variable", "scope": "IncomeCreate", "scopeKind": "class"}, {"_type": "tag", "name": "router", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/income.py", "pattern": "/^router = APIRouter(prefix=\"\\/income\", tags=[\"transactions\"])$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "txn_date", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/income.py", "pattern": "/^    txn_date: Optional[date] = Field(..., alias=\"date\", description=\"Transaction date (YYYY-MM-D/", "language": "Python", "typeref": "typename:Optional[date]", "kind": "variable", "scope": "IncomeCreate", "scopeKind": "class"}], "hash": "d9ff265264b9d7b90c47ea76bd8f01fd", "format-version": 4, "code-base-name": "finance_backend", "filename": "finance_backend/src/api/routers/income.py", "fields": [{"name": "float amount", "scope": "IncomeCreate", "scopeKind": "class", "description": "unavailable"}, {"name": "str category", "scope": "IncomeCreate", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] description", "scope": "IncomeCreate", "scopeKind": "class", "description": "unavailable"}, {"name": "model_config = ConfigDict(populate_by_name=True, from_attributes=True)", "scope": "IncomeCreate", "scopeKind": "class", "description": "unavailable"}, {"name": "router = APIRouter(prefix=\"\\/income\", tags=[\"transactions\"])", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Optional[date] txn_date", "scope": "IncomeCreate", "scopeKind": "class", "description": "unavailable"}]}