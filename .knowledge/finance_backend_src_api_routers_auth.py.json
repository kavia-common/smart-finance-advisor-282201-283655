{"is_source_file": true, "format": "Python", "description": "This file defines API endpoints for authentication in a FastAPI application, including user registration and login, along with helper functions for user lookup and token creation.", "external_files": ["src/core/security.py", "src/db/models.py", "src/db/session.py"], "external_methods": ["create_access_token", "hash_password", "verify_password"], "published": ["router"], "classes": [{"name": "TokenResponse", "description": "Response model for token data including access token, token type, and expiration time."}, {"name": "RegisterRequest", "description": "Request model for user registration containing email and password."}, {"name": "LoginRequest", "description": "Request model for user login containing email and password."}, {"name": "UserResponse", "description": "Response model representing user data, including user id and email."}], "methods": [{"name": "User|None _find_user_by_email(db: Session, email: str)", "description": "Helper function to find a user in the database by email.", "scope": "", "scopeKind": ""}, {"name": "TokenResponse _token_payload_and_response(user: User, minutes: int = 60)", "description": "Generates a JWT token and a TokenResponse object for a given user.", "scope": "", "scopeKind": ""}, {"name": "TokenResponse register(payload: RegisterRequest, db: Annotated[Session, Depends(get_db)])", "description": "Endpoint to register a new user account and return an access token.", "scope": "", "scopeKind": ""}, {"name": "TokenResponse login(payload: LoginRequest, db: Annotated[Session, Depends(get_db)])", "description": "Endpoint to authenticate a user and return a JWT token.", "scope": "", "scopeKind": ""}], "calls": ["create_access_token", "hash_password", "verify_password", "db.execute", "db.commit", "db.refresh"], "search-terms": ["auth", "register", "login", "TokenResponse", "user lookup", "JWT token", "FastAPI", "SQLAlchemy"], "state": 2, "file_id": 24, "knowledge_revision": 106, "git_revision": "", "ctags": [{"_type": "tag", "name": "LoginRequest", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/auth.py", "pattern": "/^class LoginRequest(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "RegisterRequest", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/auth.py", "pattern": "/^class RegisterRequest(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "TokenResponse", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/auth.py", "pattern": "/^class TokenResponse(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "UserResponse", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/auth.py", "pattern": "/^class UserResponse(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "_find_user_by_email", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/auth.py", "pattern": "/^def _find_user_by_email(db: Session, email: str) -> User | None:$/", "language": "Python", "typeref": "typename:User|None", "kind": "function", "signature": "(db: Session, email: str)"}, {"_type": "tag", "name": "_token_payload_and_response", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/auth.py", "pattern": "/^def _token_payload_and_response(user: User, minutes: int = 60) -> TokenResponse:$/", "language": "Python", "typeref": "typename:TokenResponse", "kind": "function", "signature": "(user: User, minutes: int = 60)"}, {"_type": "tag", "name": "access_token", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/auth.py", "pattern": "/^    access_token: str = Field(..., description=\"JWT access token\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "TokenResponse", "scopeKind": "class"}, {"_type": "tag", "name": "email", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/auth.py", "pattern": "/^    email: EmailStr = Field(..., description=\"User email\")$/", "language": "Python", "typeref": "typename:EmailStr", "kind": "variable", "scope": "LoginRequest", "scopeKind": "class"}, {"_type": "tag", "name": "email", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/auth.py", "pattern": "/^    email: EmailStr = Field(..., description=\"User email\")$/", "language": "Python", "typeref": "typename:EmailStr", "kind": "variable", "scope": "RegisterRequest", "scopeKind": "class"}, {"_type": "tag", "name": "email", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/auth.py", "pattern": "/^    email: EmailStr = Field(..., description=\"User email\")$/", "language": "Python", "typeref": "typename:EmailStr", "kind": "variable", "scope": "UserResponse", "scopeKind": "class"}, {"_type": "tag", "name": "expires_in", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/auth.py", "pattern": "/^    expires_in: int = Field(..., description=\"Expiration in seconds\")$/", "language": "Python", "typeref": "typename:int", "kind": "variable", "scope": "TokenResponse", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/auth.py", "pattern": "/^    id: int = Field(..., description=\"User id\")$/", "language": "Python", "typeref": "typename:int", "kind": "variable", "scope": "UserResponse", "scopeKind": "class"}, {"_type": "tag", "name": "login", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/auth.py", "pattern": "/^def login(payload: LoginRequest, db: Annotated[Session, Depends(get_db)]) -> TokenResponse:$/", "language": "Python", "typeref": "typename:TokenResponse", "kind": "function", "signature": "(payload: LoginRequest, db: Annotated[Session, Depends(get_db)])"}, {"_type": "tag", "name": "password", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/auth.py", "pattern": "/^    password: str = Field(..., description=\"User password\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "LoginRequest", "scopeKind": "class"}, {"_type": "tag", "name": "password", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/auth.py", "pattern": "/^    password: str = Field(..., min_length=6, description=\"Password (min 6 chars)\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "RegisterRequest", "scopeKind": "class"}, {"_type": "tag", "name": "register", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/auth.py", "pattern": "/^def register(payload: RegisterRequest, db: Annotated[Session, Depends(get_db)]) -> TokenResponse/", "language": "Python", "typeref": "typename:TokenResponse", "kind": "function", "signature": "(payload: RegisterRequest, db: Annotated[Session, Depends(get_db)])"}, {"_type": "tag", "name": "router", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/auth.py", "pattern": "/^router = APIRouter(prefix=\"\\/auth\", tags=[\"auth\"])$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "token_type", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/auth.py", "pattern": "/^    token_type: str = Field(\"bearer\", description=\"Token type\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "TokenResponse", "scopeKind": "class"}], "hash": "aa0b6121103705ba2b0a44b6caf0a711", "format-version": 4, "code-base-name": "finance_backend", "filename": "finance_backend/src/api/routers/auth.py", "fields": [{"name": "str access_token", "scope": "TokenResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "EmailStr email", "scope": "LoginRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "int expires_in", "scope": "TokenResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "int id", "scope": "UserResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "str password", "scope": "LoginRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "router = APIRouter(prefix=\"\\/auth\", tags=[\"auth\"])", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "str token_type", "scope": "TokenResponse", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"106": ""}]}