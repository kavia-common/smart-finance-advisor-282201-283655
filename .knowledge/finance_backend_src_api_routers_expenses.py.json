{"is_source_file": true, "format": "Python", "description": "This source file is a FastAPI router module for managing expense transactions in a financial backend system. It includes endpoints for creating, listing, and deleting expense records, with database interactions handled via SQLAlchemy ORM models and schemas. The file defines data models for expense creation, as well as API endpoint functions that depend on user authentication and database sessions.", "external_files": ["src/core/security.py", "src/db/models.py", "src/db/schemas.py", "src/db/session.py"], "external_methods": ["get_current_user", "get_db"], "published": ["create_expense", "list_expenses", "delete_expense"], "classes": [{"name": "ExpenseCreate", "description": "Pydantic model representing the payload for creating an expense, including transaction date, amount, category, and optional description."}], "methods": [{"name": "TransactionSchema create_expense( payload: ExpenseCreate, db: Annotated[Session, Depends(get_db)], current_user: Annotated[User, Depends(get_current_user)], )", "description": "Endpoint to create a new expense transaction for the authenticated user.", "scope": "", "scopeKind": ""}, {"name": "list[TransactionSchema] list_expenses( db: Annotated[Session, Depends(get_db)], current_user: Annotated[User, Depends(get_current_user)], month: Optional[int] = Query(None, ge=1, le=12, description=\"Month number (1-12)\"), year: Optional[int] = Query(None, ge=1900, le=9999, description=\"Year (e.g., 2025)\"), category: Optional[str] = Query(None, description=\"Filter by category (exact match)\"), )", "description": "Endpoint to retrieve a list of expense transactions, optionally filtered by month, year, and category.", "scope": "", "scopeKind": ""}, {"name": "Response delete_expense( id: int, db: Annotated[Session, Depends(get_db)], current_user: Annotated[User, Depends(get_current_user)], )", "description": "Endpoint to delete an expense transaction by ID, ensuring ownership by the current user.", "scope": "", "scopeKind": ""}], "calls": ["db.add", "db.commit", "db.refresh", "db.execute", "db.get", "db.delete", "db.close", "HTTPException", "Response", "select", "and_", "get_current_user", "get_db"], "search-terms": ["/expenses", "ExpenseCreate", "create_expense", "list_expenses", "delete_expense", "transaction", "expenses API", "transactions router"], "state": 2, "file_id": 26, "knowledge_revision": 138, "git_revision": "befd54bf5e6c83f7ffeb972dfb7d63aea62a8602", "revision_history": [{"123": ""}, {"129": "03629ed1584e713bdcea33e2efd9e56b83a87cdb"}, {"134": "5e2372e4514d78aff9e439082af5e1cc19335fc2"}, {"138": "befd54bf5e6c83f7ffeb972dfb7d63aea62a8602"}], "ctags": [{"_type": "tag", "name": "Config", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/expenses.py", "pattern": "/^    class Config:$/", "language": "Python", "kind": "class", "scope": "ExpenseCreate", "scopeKind": "class"}, {"_type": "tag", "name": "ExpenseCreate", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/expenses.py", "pattern": "/^class ExpenseCreate(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "TransactionSchema", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/expenses.py", "pattern": "/^from src.db.schemas import Transaction as TransactionSchema$/", "language": "Python", "kind": "unknown", "nameref": "unknown:Transaction"}, {"_type": "tag", "name": "amount", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/expenses.py", "pattern": "/^    amount: float = Field(..., description=\"Expense amount (positive number)\")$/", "language": "Python", "typeref": "typename:float", "kind": "variable", "scope": "ExpenseCreate", "scopeKind": "class"}, {"_type": "tag", "name": "category", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/expenses.py", "pattern": "/^    category: str = Field(..., description=\"Category for the expense (e.g., Groceries)\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "ExpenseCreate", "scopeKind": "class"}, {"_type": "tag", "name": "create_expense", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/expenses.py", "pattern": "/^def create_expense($/", "language": "Python", "typeref": "typename:TransactionSchema", "kind": "function", "signature": "( payload: ExpenseCreate, db: Annotated[Session, Depends(get_db)], current_user: Annotated[User, Depends(get_current_user)], )"}, {"_type": "tag", "name": "delete_expense", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/expenses.py", "pattern": "/^def delete_expense($/", "language": "Python", "typeref": "typename:Response", "kind": "function", "signature": "( id: int, db: Annotated[Session, Depends(get_db)], current_user: Annotated[User, Depends(get_current_user)], )"}, {"_type": "tag", "name": "description", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/expenses.py", "pattern": "/^    description: Optional[str] = Field(None, description=\"Optional description\")$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "ExpenseCreate", "scopeKind": "class"}, {"_type": "tag", "name": "list_expenses", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/expenses.py", "pattern": "/^def list_expenses($/", "language": "Python", "typeref": "typename:list[TransactionSchema]", "kind": "function", "signature": "( db: Annotated[Session, Depends(get_db)], current_user: Annotated[User, Depends(get_current_user)], month: Optional[int] = Query(None, ge=1, le=12, description=\"Month number (1-12)\"), year: Optional[int] = Query(None, ge=1900, le=9999, description=\"Year (e.g., 2025)\"), category: Optional[str] = Query(None, description=\"Filter by category (exact match)\"), )"}, {"_type": "tag", "name": "populate_by_name", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/expenses.py", "pattern": "/^        populate_by_name = True  # allow using field names or aliases when parsing$/", "language": "Python", "kind": "variable", "scope": "ExpenseCreate.Config", "scopeKind": "class"}, {"_type": "tag", "name": "router", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/expenses.py", "pattern": "/^router = APIRouter(prefix=\"\\/expenses\", tags=[\"transactions\"])$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "txn_date", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/expenses.py", "pattern": "/^    txn_date: date = Field(..., alias=\"date\", description=\"Transaction date (YYYY-MM-DD)\")$/", "language": "Python", "typeref": "typename:date", "kind": "variable", "scope": "ExpenseCreate", "scopeKind": "class"}], "hash": "ec90620d6d788ee9c21c3ca3ef2c4546", "format-version": 4, "code-base-name": "finance_backend", "filename": "finance_backend/src/api/routers/expenses.py", "fields": [{"name": "float amount", "scope": "ExpenseCreate", "scopeKind": "class", "description": "unavailable"}, {"name": "str category", "scope": "ExpenseCreate", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] description", "scope": "ExpenseCreate", "scopeKind": "class", "description": "unavailable"}, {"name": "populate_by_name = True  # allow using field names or aliases when parsing", "scope": "ExpenseCreate.Config", "scopeKind": "class", "description": "unavailable"}, {"name": "router = APIRouter(prefix=\"\\/expenses\", tags=[\"transactions\"])", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "date txn_date", "scope": "ExpenseCreate", "scopeKind": "class", "description": "unavailable"}]}