{"is_source_file": true, "format": "Python (FastAPI)", "description": "This file defines API endpoint routes for managing user expenses, including creating, listing, and deleting expense transactions in a financial application. It uses FastAPI, SQLAlchemy, and Pydantic for data modeling, request handling, and database interactions.", "external_files": ["src.core.security", "src.db.models", "src.db.schemas", "src.db.session"], "external_methods": ["src.core.security.get_current_user", "src.db.models.Transaction", "src.db.models.User", "src.db.schemas.Transaction", "src.db.session.get_db"], "published": ["router"], "classes": [{"name": "ExpenseCreate", "description": "Pydantic model schema for creating a new expense, including fields for date, amount, category, and optional description."}], "methods": [{"name": "TransactionSchema create_expense( payload: ExpenseCreate, db: Annotated[Session, Depends(get_db)], current_user: Annotated[User, Depends(get_current_user)], )", "description": "API endpoint to create a new expense transaction associated with the authenticated user. Validates input, creates a Transaction record, and returns it.", "scope": "", "scopeKind": ""}, {"name": "list[TransactionSchema] list_expenses( db: Annotated[Session, Depends(get_db)], current_user: Annotated[User, Depends(get_current_user)], month: Optional[int] = Query(None, ge=1, le=12, description=\"Month number (1-12)\"), year: Optional[int] = Query(None, ge=1900, le=9999, description=\"Year (e.g., 2025)\"), category: Optional[str] = Query(None, description=\"Filter by category (exact match)\"), )", "description": "API endpoint to retrieve a list of expense transactions for the authenticated user, supporting optional filtering by month, year, and category.", "scope": "", "scopeKind": ""}, {"name": "None delete_expense( id: int, db: Annotated[Session, Depends(get_db)], current_user: Annotated[User, Depends(get_current_user)], )", "description": "API endpoint to delete a specific expense transaction by its ID, with authorization check to ensure ownership.", "scope": "", "scopeKind": ""}], "calls": ["db.add", "db.commit", "db.refresh", "db.execute", "db.delete", "db.get"], "search-terms": ["expenses", "Transaction", "create_expense", "list_expenses", "delete_expense", "API router"], "state": 2, "file_id": 26, "knowledge_revision": 123, "git_revision": "", "ctags": [{"_type": "tag", "name": "ExpenseCreate", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/expenses.py", "pattern": "/^class ExpenseCreate(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "TransactionSchema", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/expenses.py", "pattern": "/^from src.db.schemas import Transaction as TransactionSchema$/", "language": "Python", "kind": "unknown", "nameref": "unknown:Transaction"}, {"_type": "tag", "name": "amount", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/expenses.py", "pattern": "/^    amount: float = Field(..., description=\"Expense amount (positive number)\")$/", "language": "Python", "typeref": "typename:float", "kind": "variable", "scope": "ExpenseCreate", "scopeKind": "class"}, {"_type": "tag", "name": "category", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/expenses.py", "pattern": "/^    category: str = Field(..., description=\"Category for the expense (e.g., Groceries)\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "ExpenseCreate", "scopeKind": "class"}, {"_type": "tag", "name": "create_expense", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/expenses.py", "pattern": "/^def create_expense($/", "language": "Python", "typeref": "typename:TransactionSchema", "kind": "function", "signature": "( payload: ExpenseCreate, db: Annotated[Session, Depends(get_db)], current_user: Annotated[User, Depends(get_current_user)], )"}, {"_type": "tag", "name": "date", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/expenses.py", "pattern": "/^    date: date = Field(..., description=\"Transaction date (YYYY-MM-DD)\")$/", "language": "Python", "typeref": "typename:date", "kind": "variable", "scope": "ExpenseCreate", "scopeKind": "class"}, {"_type": "tag", "name": "delete_expense", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/expenses.py", "pattern": "/^def delete_expense($/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "( id: int, db: Annotated[Session, Depends(get_db)], current_user: Annotated[User, Depends(get_current_user)], )"}, {"_type": "tag", "name": "description", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/expenses.py", "pattern": "/^    description: Optional[str] = Field(None, description=\"Optional description\")$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "ExpenseCreate", "scopeKind": "class"}, {"_type": "tag", "name": "list_expenses", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/expenses.py", "pattern": "/^def list_expenses($/", "language": "Python", "typeref": "typename:list[TransactionSchema]", "kind": "function", "signature": "( db: Annotated[Session, Depends(get_db)], current_user: Annotated[User, Depends(get_current_user)], month: Optional[int] = Query(None, ge=1, le=12, description=\"Month number (1-12)\"), year: Optional[int] = Query(None, ge=1900, le=9999, description=\"Year (e.g., 2025)\"), category: Optional[str] = Query(None, description=\"Filter by category (exact match)\"), )"}, {"_type": "tag", "name": "router", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/expenses.py", "pattern": "/^router = APIRouter(prefix=\"\\/expenses\", tags=[\"expenses\"])$/", "language": "Python", "kind": "variable"}], "hash": "6da58ffbb79e46500de6b353e5abf1e2", "format-version": 4, "code-base-name": "finance_backend", "filename": "finance_backend/src/api/routers/expenses.py", "fields": [{"name": "float amount", "scope": "ExpenseCreate", "scopeKind": "class", "description": "unavailable"}, {"name": "str category", "scope": "ExpenseCreate", "scopeKind": "class", "description": "unavailable"}, {"name": "date date", "scope": "ExpenseCreate", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] description", "scope": "ExpenseCreate", "scopeKind": "class", "description": "unavailable"}, {"name": "router = APIRouter(prefix=\"\\/expenses\", tags=[\"expenses\"])", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"123": ""}]}