{"is_source_file": true, "format": "Python", "description": "This file contains functions for seeding a demo database with sample transaction data for a finance application. It includes definitions for categories, functions to ensure a default user, generate recurring expenses, random expenses and incomes, and load bulk demo data for multiple months. It interacts with SQLAlchemy ORM models and database sessions.", "external_files": ["src/db/models.py"], "external_methods": ["sqlalchemy.orm.Session.get", "sqlalchemy.select", "sqlalchemy.delete", "sqlalchemy.func", "sqlalchemy.select", "sqlalchemy.text", "src.db.models.User", "src.db.models.Transaction"], "published": ["ensure_default_user", "clear_demo_data", "load_demo_data"], "classes": [], "methods": [{"name": "User ensure_default_user(db: Session)", "description": "Ensures that a demo user with id=1 exists in the database; creates it if not present, handling possible schema variations.", "scope": "", "scopeKind": ""}, {"name": "int clear_demo_data(db: Session)", "description": "Deletes all transaction records associated with the default demo user, making it safe to rerun seeding without duplicates.", "scope": "", "scopeKind": ""}, {"name": "dict load_demo_data( db: Session, months_back: int = 6, approx_total: int = 500, random_seed: int | None = 42, )", "description": "Populates the database with randomized demo transactions over a specified number of months, including recurring expenses, random daily expenses, and income entries; also clears previous demo data before seeding.", "scope": "", "scopeKind": ""}, {"name": "list[dict] _apply_recurring_for_month(month_start: date)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "int _count_transactions(db: Session, user_id: int)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Iterable[date] _daterange(days_back: int)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "list[dict] _generate_recurring_expenses(base_day: int = 1)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "date _month_start(d: date)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "str _random_desc(category: str)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "dict _random_expense_for_date(dt: date)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "list[dict] _random_income_for_month(month_start: date)", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["db.get", "select", "db.execute", "db.refresh", "db.add", "db.commit", "db.rollback", "delete", "select(func.count())", "select(User)", "text('PRAGMA table_info(users)')", "text('SELECT LOWER(column_name) FROM information_schema.columns WHERE LOWER(table_name)=...')", "select(Transaction)", "date", "random.seed", "random.choice", "random.random", "random.randint", "random.sample"], "search-terms": ["seed", "load_demo_data", "transactions", "categories", "demo user", "dummy data", "finance seed"], "state": 2, "file_id": 9, "knowledge_revision": 100, "git_revision": "3dbc4cd651197e744b123ba56615a4f142d5e862", "revision_history": [{"23": ""}, {"28": ""}, {"29": "ac964702809bb822a3a71d9c8d2bc0f33f1bd15d"}, {"88": "ac964702809bb822a3a71d9c8d2bc0f33f1bd15d"}, {"91": "952eb35300864a550b0e246a8ee8a9df4cf1be74"}, {"92": "952eb35300864a550b0e246a8ee8a9df4cf1be74"}, {"99": "3dbc4cd651197e744b123ba56615a4f142d5e862"}, {"100": "3dbc4cd651197e744b123ba56615a4f142d5e862"}], "ctags": [{"_type": "tag", "name": "EXPENSE_CATEGORIES", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/db/seed.py", "pattern": "/^EXPENSE_CATEGORIES = [$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "INCOME_CATEGORIES", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/db/seed.py", "pattern": "/^INCOME_CATEGORIES = [\"Salary\", \"Bonus\", \"Investment\", \"Refund\"]$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "_apply_recurring_for_month", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/db/seed.py", "pattern": "/^def _apply_recurring_for_month(month_start: date) -> list[dict]:$/", "language": "Python", "typeref": "typename:list[dict]", "kind": "function", "signature": "(month_start: date)"}, {"_type": "tag", "name": "_count_transactions", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/db/seed.py", "pattern": "/^def _count_transactions(db: Session, user_id: int) -> int:$/", "language": "Python", "typeref": "typename:int", "kind": "function", "signature": "(db: Session, user_id: int)"}, {"_type": "tag", "name": "_daterange", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/db/seed.py", "pattern": "/^def _daterange(days_back: int) -> Iterable[date]:$/", "language": "Python", "typeref": "typename:Iterable[date]", "kind": "function", "signature": "(days_back: int)"}, {"_type": "tag", "name": "_generate_recurring_expenses", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/db/seed.py", "pattern": "/^def _generate_recurring_expenses(base_day: int = 1) -> list[dict]:$/", "language": "Python", "typeref": "typename:list[dict]", "kind": "function", "signature": "(base_day: int = 1)"}, {"_type": "tag", "name": "_month_start", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/db/seed.py", "pattern": "/^def _month_start(d: date) -> date:$/", "language": "Python", "typeref": "typename:date", "kind": "function", "signature": "(d: date)"}, {"_type": "tag", "name": "_random_desc", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/db/seed.py", "pattern": "/^def _random_desc(category: str) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "(category: str)"}, {"_type": "tag", "name": "_random_expense_for_date", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/db/seed.py", "pattern": "/^def _random_expense_for_date(dt: date) -> dict:$/", "language": "Python", "typeref": "typename:dict", "kind": "function", "signature": "(dt: date)"}, {"_type": "tag", "name": "_random_income_for_month", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/db/seed.py", "pattern": "/^def _random_income_for_month(month_start: date) -> list[dict]:$/", "language": "Python", "typeref": "typename:list[dict]", "kind": "function", "signature": "(month_start: date)"}, {"_type": "tag", "name": "clear_demo_data", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/db/seed.py", "pattern": "/^def clear_demo_data(db: Session) -> int:$/", "language": "Python", "typeref": "typename:int", "kind": "function", "signature": "(db: Session)"}, {"_type": "tag", "name": "ensure_default_user", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/db/seed.py", "pattern": "/^def ensure_default_user(db: Session) -> User:$/", "language": "Python", "typeref": "typename:User", "kind": "function", "signature": "(db: Session)"}, {"_type": "tag", "name": "load_demo_data", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/db/seed.py", "pattern": "/^def load_demo_data($/", "language": "Python", "typeref": "typename:dict", "kind": "function", "signature": "( db: Session, months_back: int = 6, approx_total: int = 500, random_seed: int | None = 42, )"}], "hash": "aab9ca6eaa53c36c905a05196d4da042", "format-version": 4, "code-base-name": "finance_backend", "filename": "finance_backend/src/db/seed.py", "fields": [{"name": "EXPENSE_CATEGORIES = [", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "INCOME_CATEGORIES = [\"Salary\", \"Bonus\", \"Investment\", \"Refund\"]", "scope": "", "scopeKind": "", "description": "unavailable"}]}