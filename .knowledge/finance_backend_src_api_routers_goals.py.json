{"is_source_file": true, "format": "Python", "description": "This is a FastAPI router module defining API endpoints for managing 'goals' in a finance application. It includes route handlers for listing, creating, updating, and deleting goal entries, with schema validation and database interactions using SQLAlchemy.", "external_files": ["src.core.security", "src.db.models", "src.db.schemas", "src.db.session"], "external_methods": ["get_current_user", "get_db", "select", "HTTPException", "status.HTTP_201_CREATED", "status.HTTP_204_NO_CONTENT"], "published": ["list_goals", "create_goal", "update_goal", "delete_goal"], "classes": [{"name": "GoalUpdate", "description": "Pydantic model for updating goal fields, all optional."}], "methods": [{"name": "list[GoalSchema] list_goals( db: Annotated[Session, Depends(get_db)], current_user: Annotated[User, Depends(get_current_user)], )", "description": "Retrieve all goals for the authenticated user.", "scope": "", "scopeKind": ""}, {"name": "GoalSchema create_goal( payload: GoalCreateSchema, db: Annotated[Session, Depends(get_db)], current_user: Annotated[User, Depends(get_current_user)], )", "description": "Create a new goal for the authenticated user.", "scope": "", "scopeKind": ""}, {"name": "GoalSchema update_goal( goal_id: int, payload: GoalUpdate, db: Annotated[Session, Depends(get_db)], current_user: Annotated[User, Depends(get_current_user)], )", "description": "Update an existing goal identified by goal_id.", "scope": "", "scopeKind": ""}, {"name": "Response delete_goal( goal_id: int, db: Annotated[Session, Depends(get_db)], current_user: Annotated[User, Depends(get_current_user)], )", "description": "Delete a goal by goal_id.", "scope": "", "scopeKind": ""}], "calls": ["select", "db.execute", "db.get", "db.add", "db.delete", "db.commit", "db.refresh", "raise HTTPException", "Response"], "search-terms": ["Goal", "GoalSchema", "Goals API", "GoalUpdate", "create_goal", "update_goal", "delete_goal", "list_goals", "goal_id", "/goals"], "state": 2, "file_id": 13, "knowledge_revision": 137, "git_revision": "1ee77a566fed6ded7e4dfe1af7cd6e3df8843136", "revision_history": [{"55": ""}, {"57": "a763128ff4b4b785b3f4ab204a7e976f9a07cd4f"}, {"113": "a763128ff4b4b785b3f4ab204a7e976f9a07cd4f"}, {"114": "a763128ff4b4b785b3f4ab204a7e976f9a07cd4f"}, {"115": "a763128ff4b4b785b3f4ab204a7e976f9a07cd4f"}, {"136": "8a28d201eebe9ba4324ed391135246613f99da8a"}, {"137": "1ee77a566fed6ded7e4dfe1af7cd6e3df8843136"}], "ctags": [{"_type": "tag", "name": "GoalCreateSchema", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/goals.py", "pattern": "/^from src.db.schemas import GoalCreate as GoalCreateSchema$/", "language": "Python", "kind": "unknown", "nameref": "unknown:GoalCreate"}, {"_type": "tag", "name": "GoalSchema", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/goals.py", "pattern": "/^from src.db.schemas import Goal as GoalSchema$/", "language": "Python", "kind": "unknown", "nameref": "unknown:Goal"}, {"_type": "tag", "name": "GoalUpdate", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/goals.py", "pattern": "/^class GoalUpdate(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "create_goal", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/goals.py", "pattern": "/^def create_goal($/", "language": "Python", "typeref": "typename:GoalSchema", "kind": "function", "signature": "( payload: GoalCreateSchema, db: Annotated[Session, Depends(get_db)], current_user: Annotated[User, Depends(get_current_user)], )"}, {"_type": "tag", "name": "current_amount", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/goals.py", "pattern": "/^    current_amount: Optional[float] = Field(None, description=\"Current saved amount\")$/", "language": "Python", "typeref": "typename:Optional[float]", "kind": "variable", "scope": "GoalUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "delete_goal", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/goals.py", "pattern": "/^def delete_goal($/", "language": "Python", "typeref": "typename:Response", "kind": "function", "signature": "( goal_id: int, db: Annotated[Session, Depends(get_db)], current_user: Annotated[User, Depends(get_current_user)], )"}, {"_type": "tag", "name": "list_goals", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/goals.py", "pattern": "/^def list_goals($/", "language": "Python", "typeref": "typename:list[GoalSchema]", "kind": "function", "signature": "( db: Annotated[Session, Depends(get_db)], current_user: Annotated[User, Depends(get_current_user)], )"}, {"_type": "tag", "name": "name", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/goals.py", "pattern": "/^    name: Optional[str] = Field(None, description=\"Goal name\")$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "GoalUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "router", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/goals.py", "pattern": "/^router = APIRouter(prefix=\"\\/goals\", tags=[\"goals\"])$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "target_amount", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/goals.py", "pattern": "/^    target_amount: Optional[float] = Field(None, description=\"Target amount\")$/", "language": "Python", "typeref": "typename:Optional[float]", "kind": "variable", "scope": "GoalUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "target_date", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/goals.py", "pattern": "/^    target_date: Optional[date] = Field(None, description=\"Optional target date\")$/", "language": "Python", "typeref": "typename:Optional[date]", "kind": "variable", "scope": "GoalUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "update_goal", "path": "/home/kavia/workspace/code-generation/smart-finance-advisor-282201-283655/finance_backend/src/api/routers/goals.py", "pattern": "/^def update_goal($/", "language": "Python", "typeref": "typename:GoalSchema", "kind": "function", "signature": "( goal_id: int, payload: GoalUpdate, db: Annotated[Session, Depends(get_db)], current_user: Annotated[User, Depends(get_current_user)], )"}], "hash": "c5847852638431d7fc307cf3da58bc80", "format-version": 4, "code-base-name": "finance_backend", "filename": "finance_backend/src/api/routers/goals.py", "fields": [{"name": "Optional[float] current_amount", "scope": "GoalUpdate", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] name", "scope": "GoalUpdate", "scopeKind": "class", "description": "unavailable"}, {"name": "router = APIRouter(prefix=\"\\/goals\", tags=[\"goals\"])", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Optional[float] target_amount", "scope": "GoalUpdate", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[date] target_date", "scope": "GoalUpdate", "scopeKind": "class", "description": "unavailable"}]}